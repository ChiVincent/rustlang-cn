# 遇见Safe与Unsafe 

> 原文跟踪[meet-safe-and-unsafe.md](https://github.com/rust-lang-nursery/nomicon/blob/master/src/meet-safe-and-unsafe.md) &emsp; Commit: a08085479b674bcac6e41bdc00dbee798ea9854e

![safe and unsafe](../img/safeandunsafe.svg)

不必担心底层实现细节是一件很棒的事。谁会关心空元组占用多少空间呢？可惜有时这很重要，我们需要担心它。性能是开发人员开始关注实现细节的最常见原因，但更重要的是，当与其他语言交互，或直接涉及硬件、操作系统时，这些细节可能关系到程序的正确性。

在一个安全的编程语言中，当实现细节开始变得重要时，程序员通常有三个选择：

- 调整代码以鼓励编译器或运行时执行优化
- 采用不地道或更加繁琐的设计来实现所需的实现
- 用一种可以控制这些细节的语言重写实现

对于最后一个选项，语言程序员倾向于使用C语言。这通常需要与仅声明C接口的系统进行交互。

不幸的是，C使用起来非常不安全（有时是有充分理由的），并且当试图与另一种语言进行互操作时，这种不安全性会被放大。必须注意确保C和其他语言就正在发生的事情达成一致，并且他们不会互相踩到对方的脚趾。

那么这与Rust有什么关系呢？

好吧，与C不同，Rust是一种安全的编程语言。

但是，像C一样，Rust是一种不安全的编程语言。

更准确地说，Rust是包含安全和不安全的编程语言。

Rust可以被认为是两种编程语言的组合：Safe Rust和Unsafe Rust。方便的是，这些名称正是他们所说的：Safe Rust是安全的。不安全的Rust，不是。事实上，Unsafe Rust让我们做了一些非常不安全的事情。 Rust作者会恳求你不要做的事情，但无论如何我们都会做。

Safe Rust是真正的Rust编程语言。如果您所做的只是编写Safe Rust，您将永远不必担心类型安全或内存安全。你永远不会忍受悬空指针，免费使用或任何其他类型的未定义行为。

标准库还为您提供了足够的实用工具，您可以用纯正惯用的Safe Rust编写高性能的应用程序和库。

但也许你想和另一种语言交谈。也许你正在编写一个低级抽象，而不是标准库所暴露的。也许你正在编写标准库（完全用Rust编写）。也许你需要做一些类型系统不能理解的东西，只是鼓励一些dang位。也许你需要不安全的Rust。

不安全的Rust与Safe Rust完全相同，具有相同的规则和语义。它只是让你做一些绝对不安全的事情（我们将在下一节中定义）。

这种分离的价值在于我们可以获得使用C等不安全语言的好处 - 对实现细节的低级别控制 - 没有尝试将其与完全不同的安全语言集成的大多数问题。

仍然存在一些问题 - 最值得注意的是，我们必须了解类型系统所采用的属性，并在与Unsafe Rust交互的任何代码中对它们进行审计。这就是本书的目的：教你这些假设以及如何管理它们。

